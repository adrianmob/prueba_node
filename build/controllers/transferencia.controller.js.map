{"version":3,"sources":["../../src/controllers/transferencia.controller.js"],"names":["createTransferencias","req","res","body","clabe","deposito","pool","query","query_cuenta","balance","rows","parseFloat","query_deposito","length","json","status","error"],"mappings":";;;;;;;;;;;;;AAAA;;AAEA;AAEO,IAAMA,oBAAoB;AAAA,2FAAG,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACND,GAAG,CAACE,IADE,EAC1BC,KAD0B,aAC1BA,KAD0B,EACnBC,QADmB,aACnBA,QADmB;AAAA;AAAA,mBAGPC,mBAAKC,KAAL,CACzB,2CADyB,EAEzB,CAACH,KAAD,CAFyB,CAHO;;AAAA;AAG5BI,YAAAA,YAH4B;AAQ9BC,YAAAA,OAR8B,GAQpBD,YAAY,CAACE,IAAb,CAAkB,CAAlB,EAAqBD,OARD;AASlCA,YAAAA,OAAO,GAAGE,UAAU,CAACF,OAAD,CAApB;AACAA,YAAAA,OAAO,IAAIE,UAAU,CAACN,QAAD,CAArB;AAVkC;AAAA,mBAYLC,mBAAKC,KAAL,CAC3B,6DAD2B,EAE3B,CAACE,OAAD,EAAUL,KAAV,CAF2B,CAZK;;AAAA;AAY5BQ,YAAAA,cAZ4B;;AAiBlC,gBAAIA,cAAc,CAACF,IAAf,CAAoBG,MAApB,GAA6B,CAAjC,EAAoC;AAClCX,cAAAA,GAAG,CAACY,IAAJ,CAAS;AACPT,gBAAAA,QAAQ,EAAE;AADH,eAAT;AAGD,aAJD,MAIO;AACLH,cAAAA,GAAG,CAACa,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AACnBE,gBAAAA,KAAK,EAAE;AADY,eAArB;AAGD;;AAzBiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBhB,oBAAoB;AAAA;AAAA;AAAA,GAA1B","sourcesContent":["import pool from \"../config\";\n\n// Recibe como parametro clabe y deposito y regresa un mensaje de confirmacion de la transaccion\n\nexport const createTransferencias = async (req, res) => {\n  const { clabe, deposito } = req.body;\n\n  const query_cuenta = await pool.query(\n    \"SELECT balance from cuenta WHERE clabe=$1\",\n    [clabe]\n  );\n\n  let balance = query_cuenta.rows[0].balance;\n  balance = parseFloat(balance);\n  balance += parseFloat(deposito);\n\n  const query_deposito = await pool.query(\n    \"UPDATE cuenta SET balance = ($1) WHERE clabe=$2 RETURNING *\",\n    [balance, clabe]\n  );\n\n  if (query_deposito.rows.length > 0) {\n    res.json({\n      deposito: \"exito\",\n    });\n  } else {\n    res.status(401).json({\n      error: \"error\",\n    });\n  }\n};\n"],"file":"transferencia.controller.js"}