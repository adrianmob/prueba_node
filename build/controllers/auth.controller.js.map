{"version":3,"sources":["../../src/controllers/auth.controller.js"],"names":["login","req","res","body","email","password","pool","query","response","rows","length","user","token","jwt","sign","id","expiresIn","json"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA;AAEO,IAAMA,KAAK;AAAA,2FAAG,iBAAOC,GAAP,EAAYC,GAAZ;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACSD,GAAG,CAACE,IADb,EACXC,KADW,aACXA,KADW,EACJC,QADI,aACJA,QADI;AAAA;AAAA,mBAEIC,mBAAKC,KAAL,CACrB,wDADqB,EAErB,CAACH,KAAD,EAAQC,QAAR,CAFqB,CAFJ;;AAAA;AAEbG,YAAAA,QAFa;;AAOnB,gBAAIA,QAAQ,CAACC,IAAT,CAAcC,MAAd,GAAuB,CAA3B,EAA8B;AACtBC,cAAAA,IADsB,GACfH,QAAQ,CAACC,IAAT,CAAc,CAAd,CADe;AAEtBG,cAAAA,KAFsB,GAEdC,yBAAIC,IAAJ,CAAS;AAAEC,gBAAAA,EAAE,EAAEJ,IAAI,CAACI;AAAX,eAAT,EAA0B,UAA1B,EAAsC;AAClDC,gBAAAA,SAAS,EAAE;AADuC,eAAtC,CAFc;AAM5Bd,cAAAA,GAAG,CAACe,IAAJ,CAASL,KAAT;AACD;;AAdkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAALZ,KAAK;AAAA;AAAA;AAAA,GAAX","sourcesContent":["import pool from \"../config\";\nimport jwt from \"jsonwebtoken\";\n\n// Recibe como parametro correo y password y regresa el token de validacion\n\nexport const login = async (req, res) => {\n  const { email, password } = req.body;\n  const response = await pool.query(\n    \"SELECT * from users WHERE email = $1 AND password = $2\",\n    [email, password]\n  );\n\n  if (response.rows.length > 0) {\n    const user = response.rows[0];\n    const token = jwt.sign({ id: user.id }, \"api-auth\", {\n      expiresIn: 86400,\n    });\n\n    res.json(token);\n  }\n};\n"],"file":"auth.controller.js"}